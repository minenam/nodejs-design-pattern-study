## 비동기 프로그래밍의 어려움

### 콜백 지옥
콜백의 정의가 코드의 가독성을 떨어뜨리고 관리할 수 없는 상황.

Node.js와 JavaScript에서 일반적으로 가장 잘 알려져 있는 안티 패턴 중 하나

콜백 지옥의 다른 문제는 각 스코프에서 사용하는 변수의 중복이 발생한다는 점이다.

### 병렬 실행
Node.js의 Non-Blocking 성질 덕분에 단 하나의 스레드만 가지고도 동시성을 달성할 수 있다.

실제로 이 경우 병렬이라는 용어는 부적절하다.

작업들을 동시에 실행하는 것이 아니라 Non-Blocking API 위에서 실행되고 이벤트루프에 의해 인터리브(interleaved)된다는 것을 의미함.

Node.js에서는 Non-Blocking API에 의해 내부적으로 동시 처리되기 때문에 병렬 비동기 작업으로 실행된다는 것임.

## 동시 작업과 경쟁 상태 수정
멀티 스레드와 함께 Blocking I/O를 사용하는 경우 병렬로 작업들을 실행할 때 문제가 발생할 수 있음.

Node.js가 가진 동시성 모델의 중요한 특징은 작업 동기화 및 경쟁 상태를 다루는 방식임.

멀티 스레드 프로그램에서 이것은 일반적으로 Lock, Mutex, Semaphore 및 Monitor와 같은 구조를 사용하여 수행됨.

이는 병렬 처리의 성능에 상당한 영향을 미칠 뿐만 아니라 가장 복잡할 수 있음.

Node.js에서는 모든 것이 단일 스레드에서 실행되기 때문에 일반적으로 멋진 동기화 메커니즘을 필요로 하지 않음.

그러나 이것이 경쟁 조건을 가지지 않는 다는 것을 의미하지는 않음.

오히려 문제의 원인은 비동기 작업의 호출과 그 결과에 대한 통지 사이에 생기는 지연임.

## Primise
더 나은 비동기 코드를 만들기 위한 해법으로 Promise가 등장함.

비동기 작업의 최종 결과에 대한 상태를 전달하는 객체.

pending: 작업이 아직 완료되지 않음

settled: 작업이 완료되어 더 이상 진행 중이지 않음(fulfilled 또는 rejected 상태)

fulfilled: 작업이 성공적으로 완료됨

rejected: 작업이 실패함

